import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as O,o as R,a as E,b,w as M,F as ue,r as be,d as F,e as W,t as z,u as Se,p as U,f as q,s as V,g as h,h as _e,i as P,j as Z,k as j,l as ce,m as ve,n as A,q as de,v as me,x as $,y as he,z as X,A as fe,B as ke,C as xe,D as Te,E as Ie,G as Ve,H as Be,I as Ee,J as Me,K as Pe,T as Ce,L as He,M as Ne,N as De,O as Le,P as Re,Q as Ae}from"./index-DcDe6x07.js";import{V as Ye,a as $e,b as ae,m as Oe,u as We,c as ze,d as Xe}from"./delay-DDNbx6Va.js";import{V as le,u as Fe,a as oe,b as Ue,c as qe,d as Ze,t as je,e as Ge,m as Je,f as Ke,g as Qe,h as ne}from"./VBtn-DDRTgwIh.js";import{l as et}from"./logo-CPbpqbZY.js";import{u as ge}from"./ssrBoot-1cYoNe5C.js";import{u as tt}from"./scopeId-DNdRRRed.js";import{m as at}from"./dimensions-1b8KmgWA.js";import{V as lt,a as ot}from"./VMain-C5XXE6zj.js";const nt={setup(){const e=Se(),o=e.global.current.value.dark?0:1;return{theme:e,toggleTheme:()=>e.global.name.value=e.global.current.value.dark?"light":"dark",themeIconIdx:o}},data(){return{links:[{path:"/member",icon:"mdi-account-group-outline",title:"帳號管理"},{path:"/category",icon:"mdi-star-circle-outline",title:"類別管理"},{path:"",icon:"mdi-widgets-outline",title:"產品管理"},{path:"",icon:"mdi-account-group-outline",title:"產品加值管理"},{path:"",icon:"mdi-account-group-outline",title:"菜單管理"},{path:"/store",icon:"mdi-account-group-outline",title:"門市管理"}],themeIcons:["mdi-weather-sunny","mdi-weather-night"],themeIcon:null}},mounted(){this.themeIcon=this.themeIcons[this.themeIconIdx]},methods:{toPage(e){e==0&&this.$router.push({path:"/login",params:{}})},changeTheme(){this.toggleTheme(),this.themeIconIdx=1-this.themeIconIdx,this.themeIcon=this.themeIcons[this.themeIconIdx],localStorage.setItem("themeIdx",this.themeIconIdx)}}},rt={class:"d-flex flex-column fill-height"},st={class:"flex-grow-1 d-flex flex-column pa-4",style:{"font-size":"18px"}},it={class:"d-flex ma-1"};function ut(e,o,n,w,t,a){return R(),O("div",rt,[E("div",st,[b($e,{lines:!1,nav:""},{default:M(()=>[(R(!0),O(ue,null,be(t.links,(l,r)=>(R(),F(Ye,{key:r,to:l.path,color:"primary",style:{cursor:"pointer"}},{prepend:M(()=>[b(le,{icon:l.icon},null,8,["icon"])]),default:M(()=>[W(" "+z(l.title),1)]),_:2},1032,["to"]))),128))]),_:1})]),E("div",it,[E("div",{onClick:o[0]||(o[0]=(...l)=>a.changeTheme&&a.changeTheme(...l))},[b(le,null,{default:M(()=>[W(z(t.themeIcon),1)]),_:1})])])])}const ct=ie(nt,[["render",ut]]),vt=U({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function dt(e){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:n}=o;let w=0,t=0;const a=q(null),l=V(0),r=V(0),_=V(0),S=V(!1),u=V(!1),v=h(()=>Number(e.scrollThreshold)),y=h(()=>_e((v.value-l.value)/v.value||0)),f=()=>{const s=a.value;if(!s||n&&!n.value)return;w=l.value,l.value="window"in s?s.pageYOffset:s.scrollTop;const p=s instanceof Window?document.documentElement.scrollHeight:s.scrollHeight;if(t!==p){t=p;return}u.value=l.value<w,_.value=Math.abs(l.value-v.value)};return P(u,()=>{r.value=r.value||l.value}),P(S,()=>{r.value=0}),Z(()=>{P(()=>e.scrollTarget,s=>{var B;const p=s?document.querySelector(s):window;p&&p!==a.value&&((B=a.value)==null||B.removeEventListener("scroll",f),a.value=p,a.value.addEventListener("scroll",f,{passive:!0}))},{immediate:!0})}),j(()=>{var s;(s=a.value)==null||s.removeEventListener("scroll",f)}),n&&P(n,f,{immediate:!0}),{scrollThreshold:v,currentScroll:l,currentThreshold:_,isScrollActive:S,scrollRatio:y,isScrollingUp:u,savedScroll:r}}const mt=U({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Oe(),...fe(),...vt(),height:{type:[Number,String],default:64}},"VAppBar"),ht=ce()({name:"VAppBar",props:mt(),emits:{"update:modelValue":e=>!0},setup(e,o){let{slots:n}=o;const w=q(),t=ve(e,"modelValue"),a=h(()=>{var I;const d=new Set(((I=e.scrollBehavior)==null?void 0:I.split(" "))??[]);return{hide:d.has("hide"),fullyHide:d.has("fully-hide"),inverted:d.has("inverted"),collapse:d.has("collapse"),elevate:d.has("elevate"),fadeImage:d.has("fade-image")}}),l=h(()=>{const d=a.value;return d.hide||d.fullyHide||d.inverted||d.collapse||d.elevate||d.fadeImage||!t.value}),{currentScroll:r,scrollThreshold:_,isScrollingUp:S,scrollRatio:u}=dt(e,{canScroll:l}),v=h(()=>a.value.hide||a.value.fullyHide),y=h(()=>e.collapse||a.value.collapse&&(a.value.inverted?u.value>0:u.value===0)),f=h(()=>e.flat||a.value.fullyHide&&!t.value||a.value.elevate&&(a.value.inverted?r.value>0:r.value===0)),s=h(()=>a.value.fadeImage?a.value.inverted?1-u.value:u.value:void 0),p=h(()=>{var N,C;if(a.value.hide&&a.value.inverted)return 0;const d=((N=w.value)==null?void 0:N.contentHeight)??0,I=((C=w.value)==null?void 0:C.extensionHeight)??0;return v.value?r.value<_.value||a.value.fullyHide?d+I:d:d+I});A(h(()=>!!e.scrollBehavior),()=>{de(()=>{v.value?a.value.inverted?t.value=r.value>_.value:t.value=S.value||r.value<_.value:t.value=!0})});const{ssrBootStyles:B}=ge(),{layoutItemStyles:H}=me({id:e.name,order:h(()=>parseInt(e.order,10)),position:$(e,"location"),layoutSize:p,elementSize:V(void 0),active:t,absolute:$(e,"absolute")});return he(()=>{const d=ae.filterProps(e);return b(ae,X({ref:w,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...H.value,"--v-toolbar-image-opacity":s.value,height:void 0,...B.value},e.style]},d,{collapse:y.value,flat:f.value}),n)}),{}}});function ft(e){let{rootEl:o,isSticky:n,layoutItemStyles:w}=e;const t=V(!1),a=V(0),l=h(()=>{const S=typeof t.value=="boolean"?"top":t.value;return[n.value?{top:"auto",bottom:"auto",height:void 0}:void 0,t.value?{[S]:ke(a.value)}:{top:w.value.top}]});Z(()=>{P(n,S=>{S?window.addEventListener("scroll",_,{passive:!0}):window.removeEventListener("scroll",_)},{immediate:!0})}),j(()=>{window.removeEventListener("scroll",_)});let r=0;function _(){const S=r>window.scrollY?"up":"down",u=o.value.getBoundingClientRect(),v=parseFloat(w.value.top??0),y=window.scrollY-Math.max(0,a.value-v),f=u.height+Math.max(a.value,v)-window.scrollY-window.innerHeight,s=parseFloat(getComputedStyle(o.value).getPropertyValue("--v-body-scroll-y"))||0;u.height<window.innerHeight-v?(t.value="top",a.value=v):S==="up"&&t.value==="bottom"||S==="down"&&t.value==="top"?(a.value=window.scrollY+u.top-s,t.value=!0):S==="down"&&f<=0?(a.value=0,t.value="bottom"):S==="up"&&y<=0&&(s?t.value!=="top"&&(a.value=-y+s+v,t.value="top"):(a.value=u.top+y,t.value="top")),r=window.scrollY}return{isStuck:t,stickyStyles:l}}const gt=100,yt=20;function re(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function se(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let o=0;for(let n=e.length-1;n>0;n--){if(e[n].t===e[n-1].t)continue;const w=re(o),t=(e[n].d-e[n-1].d)/(e[n].t-e[n-1].t);o+=(t-w)*Math.abs(t),n===e.length-1&&(o*=.5)}return re(o)*1e3}function pt(){const e={};function o(t){Array.from(t.changedTouches).forEach(a=>{(e[a.identifier]??(e[a.identifier]=new xe(yt))).push([t.timeStamp,a])})}function n(t){Array.from(t.changedTouches).forEach(a=>{delete e[a.identifier]})}function w(t){var S;const a=(S=e[t])==null?void 0:S.values().reverse();if(!a)throw new Error(`No samples for touch id ${t}`);const l=a[0],r=[],_=[];for(const u of a){if(l[0]-u[0]>gt)break;r.push({t:u[0],d:u[1].clientX}),_.push({t:u[0],d:u[1].clientY})}return{x:se(r),y:se(_),get direction(){const{x:u,y:v}=this,[y,f]=[Math.abs(u),Math.abs(v)];return y>f&&u>=0?"right":y>f&&u<=0?"left":f>y&&v>=0?"down":f>y&&v<=0?"up":wt()}}}return{addMovement:o,endTouch:n,getVelocity:w}}function wt(){throw new Error}function bt(e){let{el:o,isActive:n,isTemporary:w,width:t,touchless:a,position:l}=e;Z(()=>{window.addEventListener("touchstart",d,{passive:!0}),window.addEventListener("touchmove",I,{passive:!1}),window.addEventListener("touchend",N,{passive:!0})}),j(()=>{window.removeEventListener("touchstart",d),window.removeEventListener("touchmove",I),window.removeEventListener("touchend",N)});const r=h(()=>["left","right"].includes(l.value)),{addMovement:_,endTouch:S,getVelocity:u}=pt();let v=!1;const y=V(!1),f=V(0),s=V(0);let p;function B(i,c){return(l.value==="left"?i:l.value==="right"?document.documentElement.clientWidth-i:l.value==="top"?i:l.value==="bottom"?document.documentElement.clientHeight-i:L())-(c?t.value:0)}function H(i){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const m=l.value==="left"?(i-s.value)/t.value:l.value==="right"?(document.documentElement.clientWidth-i-s.value)/t.value:l.value==="top"?(i-s.value)/t.value:l.value==="bottom"?(document.documentElement.clientHeight-i-s.value)/t.value:L();return c?Math.max(0,Math.min(1,m)):m}function d(i){if(a.value)return;const c=i.changedTouches[0].clientX,m=i.changedTouches[0].clientY,g=25,k=l.value==="left"?c<g:l.value==="right"?c>document.documentElement.clientWidth-g:l.value==="top"?m<g:l.value==="bottom"?m>document.documentElement.clientHeight-g:L(),x=n.value&&(l.value==="left"?c<t.value:l.value==="right"?c>document.documentElement.clientWidth-t.value:l.value==="top"?m<t.value:l.value==="bottom"?m>document.documentElement.clientHeight-t.value:L());(k||x||n.value&&w.value)&&(p=[c,m],s.value=B(r.value?c:m,n.value),f.value=H(r.value?c:m),v=s.value>-20&&s.value<80,S(i),_(i))}function I(i){const c=i.changedTouches[0].clientX,m=i.changedTouches[0].clientY;if(v){if(!i.cancelable){v=!1;return}const k=Math.abs(c-p[0]),x=Math.abs(m-p[1]);(r.value?k>x&&k>3:x>k&&x>3)?(y.value=!0,v=!1):(r.value?x:k)>3&&(v=!1)}if(!y.value)return;i.preventDefault(),_(i);const g=H(r.value?c:m,!1);f.value=Math.max(0,Math.min(1,g)),g>1?s.value=B(r.value?c:m,!0):g<0&&(s.value=B(r.value?c:m,!1))}function N(i){if(v=!1,!y.value)return;_(i),y.value=!1;const c=u(i.changedTouches[0].identifier),m=Math.abs(c.x),g=Math.abs(c.y);(r.value?m>g&&m>400:g>m&&g>3)?n.value=c.direction===({left:"right",right:"left",top:"down",bottom:"up"}[l.value]||L()):n.value=f.value>.5}const C=h(()=>y.value?{transform:l.value==="left"?`translateX(calc(-100% + ${f.value*t.value}px))`:l.value==="right"?`translateX(calc(100% - ${f.value*t.value}px))`:l.value==="top"?`translateY(calc(-100% + ${f.value*t.value}px))`:l.value==="bottom"?`translateY(calc(100% - ${f.value*t.value}px))`:L(),transition:"none"}:void 0);return A(y,()=>{var m,g;const i=((m=o.value)==null?void 0:m.style.transform)??null,c=((g=o.value)==null?void 0:g.style.transition)??null;de(()=>{var k,x,D,Y;(x=o.value)==null||x.style.setProperty("transform",((k=C.value)==null?void 0:k.transform)||"none"),(Y=o.value)==null||Y.style.setProperty("transition",((D=C.value)==null?void 0:D.transition)||null)}),Te(()=>{var k,x;(k=o.value)==null||k.style.setProperty("transform",i),(x=o.value)==null||x.style.setProperty("transition",c)})}),{isDragging:y,dragProgress:f,dragStyles:C}}function L(){throw new Error}const St=["start","end","left","right","top","bottom"],_t=U({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>St.includes(e)},sticky:Boolean,...Qe(),...De(),...Xe(),...Ne({mobile:null}),...Ke(),...fe(),...Je(),...at({tag:"nav"}),...He()},"VNavigationDrawer"),kt=ce()({name:"VNavigationDrawer",props:_t(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,o){let{attrs:n,emit:w,slots:t}=o;const{isRtl:a}=Ie(),{themeClasses:l}=Ve(e),{borderClasses:r}=Fe(e),{backgroundColorClasses:_,backgroundColorStyles:S}=oe($(e,"color")),{elevationClasses:u}=Ue(e),{displayClasses:v,mobile:y}=Be(e),{roundedClasses:f}=qe(e),s=Ze(),p=ve(e,"modelValue",null,T=>!!T),{ssrBootStyles:B}=ge(),{scopeId:H}=tt(),d=q(),I=V(!1),{runOpenDelay:N,runCloseDelay:C}=We(e,T=>{I.value=T}),i=h(()=>e.rail&&e.expandOnHover&&I.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),c=h(()=>je(e.location,a.value)),m=h(()=>e.persistent),g=h(()=>!e.permanent&&(y.value||e.temporary)),k=h(()=>e.sticky&&!g.value&&c.value!=="bottom");A(()=>e.expandOnHover&&e.rail!=null,()=>{P(I,T=>w("update:rail",!T))}),A(()=>!e.disableResizeWatcher,()=>{P(g,T=>!e.permanent&&Ee(()=>p.value=!T))}),A(()=>!e.disableRouteWatcher&&!!s,()=>{P(s.currentRoute,()=>g.value&&(p.value=!1))}),P(()=>e.permanent,T=>{T&&(p.value=!0)}),e.modelValue==null&&!g.value&&(p.value=e.permanent||!y.value);const{isDragging:x,dragProgress:D}=bt({el:d,isActive:p,isTemporary:g,width:i,touchless:$(e,"touchless"),position:c}),Y=h(()=>{const T=g.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):i.value;return x.value?T*D.value:T}),{layoutItemStyles:G,layoutItemScrimStyles:ye}=me({id:e.name,order:h(()=>parseInt(e.order,10)),position:c,layoutSize:Y,elementSize:i,active:Me(p),disableTransitions:h(()=>x.value),absolute:h(()=>e.absolute||k.value&&typeof J.value!="string")}),{isStuck:J,stickyStyles:pe}=ft({rootEl:d,isSticky:k,layoutItemStyles:G}),K=oe(h(()=>typeof e.scrim=="string"?e.scrim:null)),we=h(()=>({...x.value?{opacity:D.value*.2,transition:"none"}:void 0,...ye.value}));return Pe({VList:{bgColor:"transparent"}}),he(()=>{const T=t.image||e.image;return b(ue,null,[b(e.tag,X({ref:d,onMouseenter:N,onMouseleave:C,class:["v-navigation-drawer",`v-navigation-drawer--${c.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":I.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":g.value,"v-navigation-drawer--persistent":m.value,"v-navigation-drawer--active":p.value,"v-navigation-drawer--sticky":k.value},l.value,_.value,r.value,v.value,u.value,f.value,e.class],style:[S.value,G.value,B.value,pe.value,e.style]},H,n),{default:()=>{var Q,ee,te;return[T&&b("div",{key:"image",class:"v-navigation-drawer__img"},[t.image?b(Ge,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},t.image):b(ze,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),t.prepend&&b("div",{class:"v-navigation-drawer__prepend"},[(Q=t.prepend)==null?void 0:Q.call(t)]),b("div",{class:"v-navigation-drawer__content"},[(ee=t.default)==null?void 0:ee.call(t)]),t.append&&b("div",{class:"v-navigation-drawer__append"},[(te=t.append)==null?void 0:te.call(t)])]}}),b(Ce,{name:"fade-transition"},{default:()=>[g.value&&(x.value||p.value)&&!!e.scrim&&b("div",X({class:["v-navigation-drawer__scrim",K.backgroundColorClasses.value],style:[we.value,K.backgroundColorStyles.value],onClick:()=>{m.value||(p.value=!1)}},H),null)]})])}),{isStuck:J}}}),xt={setup(){},data(){return{logo:et,drawer:!0,appStore:null,userName:null}},computed:{isMobile(){return console.log("isMobile",this.$vuetify.display.smAndDown),this.$vuetify.display.smAndDown}},mounted(){this.isMobile&&(this.drawer=!1),this.appStore=Re(),this.userName=this.appStore.userName,console.log(this.appStore.isLogined,this.appStore.token)},methods:{logout(){this.appStore.setToken(null),this.$router.push({path:"/login"})}}},Tt={class:"d-flex justify-space-between align-center pa-2 w-100",style:{height:"60px"}},It=["src"],Vt={class:"d-flex align-center"},Bt={class:"mx-1"},Et={class:"mx-1"};function Mt(e,o,n,w,t,a){const l=ct;return R(),O("div",null,[b(ht,{app:""},{default:M(()=>[E("div",Tt,[E("div",null,[E("img",{src:t.logo,style:{height:"100%"}},null,8,It)]),E("div",Vt,[E("div",Bt,[a.isMobile?(R(),F(ne,{key:0,onClick:o[0]||(o[0]=r=>t.drawer=!t.drawer),color:"primary",variant:"plain",icon:"mdi-menu"})):Le("",!0)]),E("div",Et,z(t.userName),1),E("div",null,[b(ne,{color:"primary",variant:"flat",onClick:a.logout},{default:M(()=>o[2]||(o[2]=[W(" 登出 ")])),_:1},8,["onClick"])])])])]),_:1}),b(kt,{modelValue:t.drawer,"onUpdate:modelValue":o[1]||(o[1]=r=>t.drawer=r),temporary:a.isMobile,permanent:!a.isMobile},{default:M(()=>[b(l)]),_:1},8,["modelValue","temporary","permanent"])])}const Pt=ie(xt,[["render",Mt]]),Ot={__name:"default",setup(e){return(o,n)=>{const w=Pt,t=Ae("router-view");return R(),F(ot,null,{default:M(()=>[b(w),b(lt,null,{default:M(()=>[b(t)]),_:1})]),_:1})}}};export{Ot as default};
